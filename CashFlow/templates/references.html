{% extends 'base.html' %}

{% block title %}Справочники - CashFlow Manager{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h2 text-primary">
            <i class="bi bi-book me-2"></i>Управление справочниками
        </h1>
        <p class="text-muted">Настройка статусов, типов операций, категорий и подкатегорий</p>
    </div>
</div>

<ul class="nav nav-tabs mb-4" id="referencesTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="status-tab" data-bs-toggle="tab" data-bs-target="#status" type="button">
            <i class="bi bi-tag me-1"></i>Статусы
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="types-tab" data-bs-toggle="tab" data-bs-target="#types" type="button">
            <i class="bi bi-arrow-left-right me-1"></i>Типы операций
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="categories-tab" data-bs-toggle="tab" data-bs-target="#categories" type="button">
            <i class="bi bi-folder me-1"></i>Категории
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="subcategories-tab" data-bs-toggle="tab" data-bs-target="#subcategories" type="button">
            <i class="bi bi-folder2 me-1"></i>Подкатегории
        </button>
    </li>
</ul>

<div class="tab-content" id="referencesTabsContent">
    <div class="tab-pane fade show active" id="status" role="tabpanel">
        {% include 'partials/_reference_section.html' with 
            title='Статусы операций' 
            api_url='/api/statuses/'
            fields='name,description'
        %}
    </div>

    <div class="tab-pane fade" id="types" role="tabpanel">
        {% include 'partials/_reference_section.html' with 
            title='Типы операций' 
            api_url='/api/transaction-types/'
            fields='name,description'
        %}
    </div>

    <div class="tab-pane fade" id="categories" role="tabpanel">
        {% include 'partials/_reference_section.html' with 
            title='Категории' 
            api_url='/api/categories/'
            fields='name,transaction_type,description'
            extra_fields='transaction_type'
        %}
    </div>

    <div class="tab-pane fade" id="subcategories" role="tabpanel">
        {% include 'partials/_reference_section.html' with 
            title='Подкатегории' 
            api_url='/api/subcategories/'
            fields='name,category,description'
            extra_fields='category'
        %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/references.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initializeReferences();
    });
</script>
{% endblock %}